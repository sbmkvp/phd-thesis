\chapter{Collecting Wi-Fi Data}

From the literature review in Chapter \ref{chapter:literature}, we observed that  out of all the technologies discussed, Wi-Fi seems to be the most promising one.
We observed the advantages of Wi-Fi based data collection as,

\begin{itemize}
  \item Universality as a standard technology globally,
  \item Independence from other types of data sources or infrastructure,
  \item High level of granularity both spatially and temporally,
  \item Possibility of passive data collection,
  \item Extreme ease of collection in terms of cost and effort and
  \item Scalability to cover study large areas.
\end{itemize}

Though it has its pitfalls in terms of intrusiveness resulting in risk to the privacy of the users, bias and uncertainty, Wi-Fi provides us with a strong base framework for fulfilling the opportunity to design and collect a large, long term and granular dataset which can be used for studying human activity.

In this chapter, we continue our research by looking at Wi-Fi technology closely to understand how it can be used to achieve the aforementioned goal.
We start by looking at the Wi-Fi specification \cite{ieee2016} and focus on the information available within the Wi-Fi probe requests.
We then design and implement a series of data collection exercises which collect probe requests in various location with increasing level of complexity for analysis.
We explore these datasets briefly to understand the usefulness of each set of information present in the probe requests along with the uncertainties in them.
We also introduce `Smart Street Sensor' project - a national scale effort for collecting Wi-Fi data at high streets across United Kingdom.
Finally we summarise the data collection procedure with a detailed look at the each set of uncertainty in these datasets and draw conclusions on further lines of research into alleviating the uncertainty and noise so that they can be used to estimate human activity with confidence.

\section{Wi-Fi as a Source of Data} \label{wifi-as-source-of-data}

Wi-Fi is ubiquitous.
The smart-phone adoption rates are growing.
All smart-phones try to connect to internet.
In addition to mobile networks, Wi-Fi is the second most common way they connect to internet.
Most places provide Wi-Fi as the way to connect to internet.
Unlike mobile networks Wi-Fi is a general purpose service.
There are multiple networks across locations hence the phones are made to be able to move across networks seamlessly.
The mobile phone initiates the contact.
It sends a special signal called - Probe Requests.
This has information about the mobile device.
The router replies with a signal called Probe response.
This forms a digital handshake between these devices.
The devices then carry on with authentication and talking to each other.
After authentication the connection is encrypted and private.
But the probe request process is unencrypted and open.
The probe request is sequential signal which is defined in IEEE standards.
The table shows All possible information that can be included in a probe request.
The figure shows the structure of a probe request.
This is a stream of data broadcast over air from all the phones around a area. 

The probe request frame is the signal sent by a WiFi capable device when it needs to obtain information from another WiFi device.
For example, a smartphone would send a probe request to determine which WiFi access points are within range and suitable for connection.
On receipt of a probe request, an access point sends a probe response frame which contains its capability information, supported data rates, etc.
This ‘request-response’ interaction forms the first step in the connection process between these devices.
The structure of a probe request is shown in Figure 3.3.
We can observe that the request frame has two parts, a MAC header part which identifies the source device and frame body part that contains the information about the source device.
The information that can be included in a probe request shown in Table 3.2.
As mentioned earlier, the SmartStreetSensor collects some of the information present in probe request frame relayed by mobile devices, along with the time interval at which the request was collected and the number of such requests collected during that interval.
The actual information present in the data collected by the SmartStreetSensor is shown in the Table 3.3.

\input{chapters/31__initial_experiments.tex}
\input{chapters/32__pilot_study.tex}
\input{chapters/33__smart_street_sensor.tex}
\input{chapters/34__discussion.tex}
